<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <title>微信测试</title>
</head> 
<body>
    <h1>微信测试</h1>
    <script>
        var title = '抱歉！一直没敢告诉你，我是这样的人',
            content = '',
            img_url = 'http://open.iot.10086.cn/wechat/images/qa/book.png',
            img_width = 330,
            img_height = 323,
            link = window.location.href
        function shareTimeline() {
            //if(WeixinJSBridge){
                WeixinJSBridge.invoke('shareTimeline',{ 
                    "link": link,
                    "title": title,
                    "img_url": img_url,
                    "img_width": img_width,
                    "img_height": img_height
                }, function(res) {
                }); 
            //}
        }
        function shareWeibo() {
            WeixinJSBridge.invoke('shareWeibo',{
                "content": title,
                "url": link,
            }, function(res) {
            });
        }
        function shareFriend() {
            WeixinJSBridge.invoke('sendAppMessage',{
                "img_url": img_url,
                "img_width": img_width,
                "img_height": img_height,
                "link": link,
                "title": title
            }, function(res) {
            })
        }
        // 当微信内置浏览器完成内部初始化后会触发WeixinJSBridgeReady事件。 
        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() { 
            // 分享到朋友圈 
            WeixinJSBridge.on('menu:share:timeline', function(argv){
                shareTimeline(); 
            });
             // 发送给好友
            WeixinJSBridge.on('menu:share:appmessage', function(argv){
                shareFriend();
            });
            // 分享到微博
            WeixinJSBridge.on('menu:share:weibo', function(argv){
                shareWeibo();
            });
        }, false); 
    </script>
</body>
</html>
